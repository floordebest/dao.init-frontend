(this["webpackJsonpdao.init-frontend"]=this["webpackJsonpdao.init-frontend"]||[]).push([[0],{106:function(e,t,a){e.exports=a(129)},12:function(e,t){var a="https://".concat("api.testnet.chainweb.com","/chainweb/0.0/").concat("testnet04","/chain/").concat("0","/pact"),n={contractName:"init",gasStationName:"memory-wall-gas-station",namespace:"free",contractAddress:"".concat("free",".").concat("init"),gasStationAddress:"".concat("free",".").concat("memory-wall-gas-station"),explorerURL:"https://explorer.chainweb.com/".concat("testnet04".slice(0,-2)),meta:{networkId:"testnet04",chainId:"0",host:a,creationTime:function(){return Math.round((new Date).getTime()/1e3)-15},gasPrice:1e-11,gasLimit:1e4,ttl:28800,sender:"mw-free-gas",nonce:"some nonce that doesnt matter"}};e.exports={kadenaAPI:n,keyFormatter:function(e){return e.replace(new RegExp("[A-Z]+","gm")," $&").replace(new RegExp("^[a-z]","gm"),(function(e){return e.toUpperCase()}))}}},120:function(e,t){},129:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),o=a(21),i=a.n(o),s=a(42),u=a(14),m=a(68),d=a(15),p=a(200),f=a(92),E=a(204),b=a(205),g=a(193),h=a(206),v=a(207),k=a(208),y=(a(3),a(209)),x=a(195),j=a(196),w=a(192),O=a(197),A=a(132),S=a(43),F=a.n(S),I=a(12),C=a(178),N=a(185),P=a(184),L=a(183),R=a(186),B=a(180),z=a(182),G=a(96),T=(Object(C.a)((function(e){return{root:{display:"flex",flexWrap:"wrap","& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"}}})),function(e){return e.split("-").map((function(e){return e.replace(new RegExp("^.","gm"),(function(e){return e.toUpperCase()}))})).join(" ")}),W=function(e){return!e||"object"!==typeof e||("timep"in e||"int"in e||"decimal"in e||"time"in e)},U=function(e){return e&&"object"===typeof e?"time"in e?e.time:"timep"in e?e.timep:"int"in e?"string"===typeof e.int?e.int:e.int.toLocaleString():"decimal"in e?"string"===typeof e.decimal?e.decimal:e.decimal.toLocaleString():JSON.stringify(e):"boolean"===typeof e?e.toString():"string"===typeof e?e:"number"===typeof e?e.toLocaleString():JSON.stringify(e)},M=Object(C.a)({table:{minWidth:650}}),D=Object(C.a)({table:{minWidth:650},root:{"& > *":{borderBottom:"unset"}}}),J=function e(t){var a=t.json||{},n=t.isNested||!1,c=n?D:M,l=t.header||[],o=t.keyFormatter?t.keyFormatter:function(e){return e},i=t.valFormatter?t.valFormatter:function(e){return r.a.createElement("code",null,U(e))},s=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,null,r.a.createElement(z.a,null,l.map((function(e){return r.a.createElement(L.a,null,e)})))),r.a.createElement(P.a,null,Object.entries(a).map((function(t){var n=Object(u.a)(t,2),c=n[0],l=n[1];return r.a.createElement(z.a,{key:c},!1===Array.isArray(a)?r.a.createElement(L.a,null,o(c)):r.a.createElement(r.a.Fragment,null),W(l)?r.a.createElement(L.a,null,i(l)):"object"===typeof l?r.a.createElement(e,{json:l,keyFormatter:o,valFormatter:i,isNested:!0}):"function"===typeof l?r.a.createElement(L.a,null,i(l.toString())):r.a.createElement(L.a,null,i(l)))}))))};return n?r.a.createElement(N.a,{className:c.table,size:"small","aria-label":"simple table"},s()):r.a.createElement(R.a,{component:G.a},r.a.createElement(N.a,{className:c.table,size:"small","aria-label":"simple table"},s()))},q=function e(t){var a=t.json||{},n=t.isNested||!1,c=n?D:M,l=t.header||[],o=[];t.keyOrder?o=t.keyOrder:Array.isArray(t.json)&&a.length>0&&(o=Object.keys(a[0]));var i=t.keyFormatter?t.keyFormatter:function(e){return e},s=t.valFormatter?t.valFormatter:function(e){return r.a.createElement("code",null,U(e))},u=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,null,r.a.createElement(z.a,null,l.map((function(e){return r.a.createElement(L.a,null,e)})))),r.a.createElement(P.a,null,a.map((function(t){return r.a.createElement(z.a,{key:t[o[0]]},o.map((function(a){var n=t[a];return r.a.createElement(L.a,null,W(n)?s(n):Array.isArray(n)?r.a.createElement(e,{json:n,keyFormatter:i,valFormatter:s,isNested:!0}):"object"===typeof n?r.a.createElement(J,{json:n,keyFormatter:i,valFormatter:s,isNested:!0}):s("function"===typeof n?n.toString():n))})))}))))};return n?r.a.createElement(N.a,{className:c.table,size:"small","aria-label":"simple table"},u()):r.a.createElement(R.a,{component:G.a},r.a.createElement(N.a,{className:c.table,size:"small","aria-label":"simple table"},u()))},V=a(213),K=a(189),$=a(88),H=a.n($),Z=a(190),Q=a(191),X=a(210),Y=a(212),_=a(187),ee=a(188),te=Object(C.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),ae=function(e){var t=e.tx,a=e.txRes,c=e.txStatus,l=Object(n.useState)(!0),o=Object(u.a)(l,2),i=o[0],s=o[1],m=Object(n.useState)(!1),d=Object(u.a)(m,2),p=d[0],f=d[1],E=te(),b="pending"===c?"info":"success"===c?"success":"timeout"===c?"warning":"error";return Object(n.useEffect)((function(){return s(!0)}),[c]),c?r.a.createElement("div",{className:E.root},r.a.createElement(_.a,{in:i},r.a.createElement(V.a,{severity:b,action:r.a.createElement(ee.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){s(!1)}},r.a.createElement(H.a,{fontSize:"inherit"}))},r.a.createElement(K.a,null,r.a.createElement(Z.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(Z.a,{item:!0},T(c)),"validation-error"===c||"failure"===c?r.a.createElement(Z.a,{item:!0},r.a.createElement(Q.a,{orientation:"vertical",flexItem:!0}),r.a.createElement(w.a,{size:"small",onClick:function(){return f(!0)}},"View")):r.a.createElement(r.a.Fragment,null))),"pending"===c?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Awaiting Confirmation"),r.a.createElement("a",{href:"".concat(I.kadenaAPI.explorerURL,"/tx/").concat(t.hash)},"Eventual Block Explorer Link")):"success"===c?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"".concat(I.kadenaAPI.explorerURL,"/tx/").concat(t.hash)},"View transaction in Block Explorer")):"failure"===c?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"".concat(I.kadenaAPI.explorerURL,"/tx/").concat(t.hash)},"View transaction in Block Explorer"),r.a.createElement("div",null,r.a.createElement(Y.a,{open:p,onClose:function(){return f(!1)}},r.a.createElement(g.a,{maxWidth:"lg"},r.a.createElement(J,{json:a}))))):"timeout"===c?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"...but your tx was sent."),r.a.createElement("a",{href:"".concat(I.kadenaAPI.explorerURL,"/tx/").concat(t.hash)},"View transaction in Block Explorer")):"validation-error"===c?r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,null,"Transaction was not sent to Blockchain. Check your keys or metadata."),r.a.createElement("div",null,r.a.createElement(Y.a,{open:p,onClose:function(){return f(!1)}},r.a.createElement(g.a,{maxWidth:"md"},r.a.createElement(G.a,null,a.toString()))))):r.a.createElement(r.a.Fragment,null)))):r.a.createElement(r.a.Fragment,null)},ne=Object(A.a)((function(e){return{formControl:{margin:"5px auto",minWidth:120},selectEmpty:{marginTop:"10px auto"}}})),re=function(){var e=Object(s.a)(i.a.mark((function e(t,a,n,r,c,l){var o,s,u,m,d,p,f=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=f.length>6&&void 0!==f[6]?f[6]:{},e.prev=1,s={pactCode:l,caps:F.a.lang.mkCap("Guadian Cap","Authenticates that your a guardian","".concat(I.kadenaAPI.contractAddress,".GUARDIAN"),[c]),gasLimit:I.kadenaAPI.meta.gasLimit,chainId:I.kadenaAPI.meta.chainId,ttl:I.kadenaAPI.meta.ttl,sender:c,envData:o},console.log("toSign",s),e.next=6,F.a.wallet.sign(s);case 6:return u=e.sent,console.log("signed",u),t(u),e.next=11,F.a.wallet.sendSigned(u,I.kadenaAPI.meta.host);case 11:m=e.sent,console.log("txReqKeys",m),a("pending"),e.prev=14,d=8,p={};case 17:if(!(d>0)){e.next=26;break}return e.next=20,new Promise((function(e){return setTimeout(e,15e3)}));case 20:return e.next=22,F.a.fetch.poll(m,I.kadenaAPI.meta.host);case 22:p=e.sent;try{p[u.hash].result.status?d=-1:d-=1}catch(i){d-=1}e.next=17;break;case 26:n(p),"success"===p[u.hash].result.status?(console.log("tx status set to success"),a("success"),r()):0===d?(console.log("tx status set to timeout"),a("timeout"),r()):(console.log("tx status set to failure"),a("failure")),e.next=36;break;case 31:e.prev=31,e.t0=e.catch(14),console.log("tx api failure",e.t0),n(e.t0),a("failure");case 36:e.next=42;break;case 38:e.prev=38,e.t1=e.catch(1),console.log("tx status set to validation error",e.t1),a("validation-error");case 42:case"end":return e.stop()}}),e,null,[[1,38],[14,31]])})));return function(t,a,n,r,c,l){return e.apply(this,arguments)}}(),ce=function(e){return r.a.createElement(q,{header:["Guardian","Committed KDA","Approved Hash","Approval Date","Guard"],keyOrder:["k","committed-kda","approved-hash","approved-date","guard"],json:e.guardians})},le=function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),i=Object(u.a)(o,2),s=i[0],m=i[1],d=Object(n.useState)(""),p=Object(u.a)(d,2),f=p[0],E=p[1],b=Object(n.useState)(""),g=Object(u.a)(b,2),h=g[0],v=g[1],k=Object(n.useState)({}),A=Object(u.a)(k,2),S=A[0],F=A[1],C=Object(n.useState)({}),N=Object(u.a)(C,2),P=N[0],L=N[1],R=Object(n.useState)(!1),B=Object(u.a)(R,2),z=B[0],G=B[1],T=ne();Object(n.useEffect)((function(){return G(!1)}),[c,s,f]);return r.a.createElement("div",null,r.a.createElement("form",{autoComplete:"off",onSubmit:function(t){return function(t){t.preventDefault();try{re(F,v,L,e.refresh,c,"(".concat(I.kadenaAPI.contractAddress,'.register-ambassador "').concat(c,'" "').concat(s,"\" (read-keyset 'ks))"),{ks:JSON.parse(f)})}catch(a){console.log("Guardian Registration Submit Error",typeof a,a,c,s,f),L(a),v("validation-error")}G(!0)}(t)}},r.a.createElement(y.a,{id:"outlined-multiline-static",select:!0,required:!0,fullWidth:!0,className:T.formControl,variant:"outlined",label:"Select Guardian",onChange:function(e){return l(e.target.value)}},e.guardians.map((function(e){return r.a.createElement(x.a,{key:e.k,value:e.k},e.k)}))),r.a.createElement(y.a,{required:!0,fullWidth:!0,value:s,className:T.formControl,variant:"outlined",label:"Ambassador Accout Name",onChange:function(e){return m(e.target.value)}}),r.a.createElement(y.a,{required:!0,fullWidth:!0,label:"Ambassador Account Guard",className:T.formControl,multiline:!0,rows:4,variant:"outlined",placeholder:JSON.stringify({pred:"keys-all",keys:["8c59a322800b3650f9fc5b6742aa845bc1c35c2625dabfe5a9e9a4cada32c543"]},void 0,2),value:f,onChange:function(e){return E(e.target.value)}}),r.a.createElement(j.a,null,"pending"===h?null:r.a.createElement(w.a,{variant:"outlined",color:"default",type:"submit",disabled:z},"Submit"))),"pending"===h?r.a.createElement(O.a,null):null,r.a.createElement(ae,{tx:S,txRes:P,txStatus:h}))},oe=function(e){return r.a.createElement(q,{header:["Ambassador","Active","Voted to Freeze","Guard"],keyOrder:["k","active","voted-to-freeze","guard"],json:e.ambassadors})},ie=function(){return r.a.createElement(J,{json:I.kadenaAPI,keyFormatter:I.keyFormatter})},se=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.fetch.local({pactCode:"(".concat(I.kadenaAPI.contractAddress,".").concat(t,")"),meta:F.a.lang.mkMeta(I.kadenaAPI.meta.sender,I.kadenaAPI.meta.chainId,I.kadenaAPI.meta.gasPrice,I.kadenaAPI.meta.gasLimit,I.kadenaAPI.meta.creationTime(),I.kadenaAPI.meta.ttl)},I.kadenaAPI.meta.host);case 2:return a=e.sent,n=a.result.data,console.log("local query data",n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(e){return r.a.createElement(J,{json:e.initState,header:["","Status"],keyFormatter:T})},me=a(69),de=a(131),pe=a(198),fe=a(199),Ee=a(194),be=a(201),ge=a(202),he=a(32),ve=a(214),ke=a(215),ye=a(13),xe=a(91),je=a.n(xe),we=a(89),Oe=a.n(we),Ae=a(90),Se=a.n(Ae),Fe=Object(C.a)((function(e){return{root:{display:"flex"},drawer:Object(me.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(me.a)({},e.breakpoints.up("sm"),{zIndex:e.zIndex.drawer+1}),menuButton:Object(me.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)}}})),Ie=function e(t){var a=t.icon,n=t.primary,c=t.to,l=t.subList,o=l&&Array.isArray(l),i=r.a.useState(!1),s=Object(u.a)(i,2),d=s[0],p=s[1],f=r.a.useMemo((function(){return r.a.forwardRef((function(e,t){return r.a.createElement(m.b,Object.assign({to:c,ref:t},e))}))}),[c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(de.a,{button:!0,component:f},a?r.a.createElement(pe.a,null,a):null,r.a.createElement(fe.a,{primary:n}),o?d?r.a.createElement(Oe.a,{onClick:function(){return p(!d)}}):r.a.createElement(Se.a,{onClick:function(){return p(!d)}}):null)),o?r.a.createElement(_.a,{in:d,timeout:"auto",unmountOnExit:!0},r.a.createElement(Ee.a,{component:"div",disablePadding:!0},l.map((function(t){return r.a.createElement(e,{icon:t.icon,primary:t.primary,to:t.to,subList:t.subList})})))):null)},Ce=function(e){var t=e.window,a=e.entriesList,n=(e.title,Fe()),c=Object(ye.a)(),l=r.a.useState(!1),o=Object(u.a)(l,2),i=o[0],s=o[1],m=function(){s(!i)},d=r.a.createElement("div",null,r.a.createElement("div",{className:n.toolbar}),a.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,null),r.a.createElement(Ee.a,null,e.map((function(e){return r.a.createElement(Ie,{icon:e.icon,primary:e.primary,to:e.to,subList:e.subList})}))))}))),f=void 0!==t?function(){return t().document.body}:void 0;return r.a.createElement("div",{className:n.root},r.a.createElement(p.a,null),r.a.createElement(be.a,{position:"fixed",className:n.appBar},r.a.createElement(ge.a,null,r.a.createElement(ee.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:m,className:n.menuButton},r.a.createElement(je.a,null)),r.a.createElement(he.a,{variant:"h6",noWrap:!0},e.title))),r.a.createElement("nav",{className:n.drawer,"aria-label":"mailbox folders"},r.a.createElement(ve.a,{smUp:!0,implementation:"css"},r.a.createElement(ke.a,{container:f,variant:"temporary",anchor:"rtl"===c.direction?"right":"left",open:i,onClose:m,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0}},d)),r.a.createElement(ve.a,{xsDown:!0,implementation:"css"},r.a.createElement(ke.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0},d))),r.a.createElement("main",{className:n.content},r.a.createElement("div",{className:n.toolbar}),e.children))},Ne=a(93),Pe=a(211),Le=a(203),Re=function(e){var t=e.children,a=e.value,n=e.index,c=Object(Ne.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"scrollable-auto-tabpanel-".concat(n),"aria-labelledby":"scrollable-auto-tab-".concat(n)},c),a===n&&r.a.createElement(X.a,{p:3},r.a.createElement(he.a,null,t)))};var Be=Object(C.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,marginTop:e.spacing(4)}}})),ze=function(e){var t=e.tabEntries,a=Be(),n=r.a.useState(0),c=Object(u.a)(n,2),l=c[0],o=c[1];return r.a.createElement("div",{className:a.root},r.a.createElement(be.a,{position:"static",color:"default"},r.a.createElement(Pe.a,{value:l,onChange:function(e,t){o(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example"},t.map((function(e,t){return r.a.createElement(Le.a,Object.assign({label:e.label},{id:"scrollable-auto-tab-".concat(a=t),"aria-controls":"scrollable-auto-tabpanel-".concat(a)}));var a})))),t.map((function(e,t){return r.a.createElement(Re,{value:l,index:t},e.component)})))},Ge=function(){var e=r.a.useMemo((function(){return Object(f.a)({palette:{primary:{light:"#cb4584",main:"#960057",dark:"#cb4584",contrastText:"#fff"},secondary:{light:"#ffffff",main:"#e3e8ed",dark:"#b1b6bb",contrastText:"#000"}}})}),[]),t=Object(n.useState)({}),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),y=Object(u.a)(o,2),x=y[0],j=y[1],w=Object(n.useState)([]),O=Object(u.a)(w,2),A=O[0],S=O[1],F=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se("view-state");case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se("view-ambassadors");case 2:t=e.sent,S(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se("view-guardians");case 2:t=e.sent,j(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){C(),F(),I(),console.log("useEffect []",x,A)}),[]),r.a.createElement(E.a,{theme:e},r.a.createElement(b.a,null,r.a.createElement(p.a,null),r.a.createElement(m.a,{basename:"/dao.init-frontend"},r.a.createElement(Ce,{title:"dao.init",entriesList:[[{primary:"Config",to:"/config"},{primary:"Init State",to:"/initState"},{primary:"Ambassadors",to:"/ambassadors"},{primary:"Guardians",to:"/guardians"}]]},r.a.createElement(g.a,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/config",component:function(){return r.a.createElement(h.a,null,r.a.createElement(v.a,{title:"Contract and UI Configuration"}),r.a.createElement(k.a,null,r.a.createElement(ie,null)))}}),r.a.createElement(d.a,{path:"/initState",component:function(){return r.a.createElement(h.a,null,r.a.createElement(v.a,{title:"Contract State"}),r.a.createElement(k.a,null,r.a.createElement(ue,{initState:c})))}}),r.a.createElement(d.a,{path:"/guardians",component:function(){return r.a.createElement(h.a,null,r.a.createElement(v.a,{title:"Guardians"}),r.a.createElement(k.a,null,r.a.createElement(ce,{guardians:x})))}}),r.a.createElement(d.a,{path:"/ambassadors",component:function(){return r.a.createElement(h.a,null,r.a.createElement(v.a,{title:"Ambassadors"}),r.a.createElement(k.a,null,r.a.createElement(oe,{ambassadors:A}),r.a.createElement(ze,{tabEntries:[{label:"Register Ambassador",component:r.a.createElement(le,{guardians:x,refresh:function(){return I()}})}]})))}})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[106,1,2]]]);
//# sourceMappingURL=main.b20fb6b0.chunk.js.map