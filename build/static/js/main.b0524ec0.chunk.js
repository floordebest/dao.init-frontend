(this["webpackJsonpdao.init-frontend"]=this["webpackJsonpdao.init-frontend"]||[]).push([[0],{166:function(e,t,a){e.exports=a(298)},180:function(e,t){},295:function(e,t,a){},298:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),o=a.n(c),l=a(153),u=a(15),i=a.n(u),s=a(26),m=a(9),d=a(312),f=a(310),b=a(308),p=a(307),h=a(299),E=a(28),g=a.n(E),k=a(8),v=a(309),y=function(e){return e.split("-").map((function(e){return e.replace(new RegExp("^.","gm"),(function(e){return e.toUpperCase()}))})).join(" ")},j=function(e){return"object"!==typeof e||("timep"in e||"int"in e||"decimal"in e||"time"in e||"pred"in e&&"keys"in e)},S=function(e){return"object"===typeof e?"time"in e?e.time:"timep"in e?e.timep:"int"in e?"string"===typeof e.int?e.int:e.int.toLocaleString():"decimal"in e?"string"===typeof e.decimal?e.decimal:e.decimal.toLocaleString():JSON.stringify(e):"boolean"===typeof e?e.toString():"string"===typeof e?e:"number"===typeof e?e.toLocaleString():JSON.stringify(e)},O=function e(t){var a=t.json||{},n=t.removeMargin||!1,c=t.header||[],o=t.keyFormatter?t.keyFormatter:function(e){return e},l=t.valFormatter?t.valFormatter:function(e){return r.a.createElement("code",null,S(e))};return r.a.createElement(v.a,{simple:!0,collapsing:!0,celled:!0,style:n?{margin:"0 auto","border-radius":"0","border-bottom":"0","border-right":"0"}:{}},r.a.createElement(v.a.Header,null,r.a.createElement(v.a.Row,null,c.map((function(e){return r.a.createElement(v.a.HeaderCell,null,e)})))),r.a.createElement(v.a.Body,null,Object.entries(a).map((function(t){var a=Object(m.a)(t,2),n=a[0],c=a[1];return r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,r.a.createElement("h4",null,o(n))),j(c)?r.a.createElement(v.a.Cell,null,l(c)):"object"===typeof c?r.a.createElement(e,{json:c,keyFormatter:o,valFormatter:l,removeMargin:!0}):"function"===typeof c?r.a.createElement(v.a.Cell,null,l(c.toString())):r.a.createElement(v.a.Cell,null,l(c)))}))))},x=function e(t){var a=t.json||{},n=t.removeMargin||!1,c=t.header||[],o=[];t.keyOrder?o=t.keyOrder:Array.isArray(t.json)&&a.length>0&&(o=Object.keys(a[0]));var l=t.keyFormatter?t.keyFormatter:function(e){return e},u=t.valFormatter?t.valFormatter:function(e){return r.a.createElement("code",null,S(e))};return r.a.createElement(v.a,{simple:!0,collapsing:!0,celled:!0,style:n?{margin:"0 auto",borderRadius:"0",borderBottom:"0",borderRight:"0"}:{}},r.a.createElement(v.a.Header,null,r.a.createElement(v.a.Row,null,c.map((function(e){return r.a.createElement(v.a.HeaderCell,null,e)})))),r.a.createElement(v.a.Body,null,a.map((function(t){return r.a.createElement(v.a.Row,null,o.map((function(a){var n=t[a];return j(n)?r.a.createElement(v.a.Cell,null,u(n)):Array.isArray(n)?r.a.createElement(v.a.Cell,{style:{margin:"0 auto",borderRadius:"0",borderBottom:"0",borderRight:"0",padding:"0"}},r.a.createElement(e,{json:n,keyFormatter:l,valFormatter:u,removeMargin:!0})):"object"===typeof n?r.a.createElement(v.a.Cell,{style:{margin:"0 auto",borderRadius:"0",borderBottom:"0",borderRight:"0",padding:"0"}},r.a.createElement(O,{json:n,keyFormatter:l,valFormatter:u,removeMargin:!0})):"function"===typeof n?r.a.createElement(v.a.Cell,null,u(n.toString())):r.a.createElement(v.a.Cell,null,u(n))})))}))))},A=a(34),w=function(e){var t=e.tx,a=e.txRes,n=e.txStatus;return r.a.createElement("div",null,"pending"===n?C(t):"success"===n?I(t):"failure"===n?P(t,a):"timeout"===n?F(t):"validation-error"===n?R(t,a):r.a.createElement("div",null))},C=function(e){return r.a.createElement(f.a,{icon:!0,attached:"bottom",info:!0},r.a.createElement(A.a,{name:"circle notched",loading:!0}),r.a.createElement(f.a.Content,null,r.a.createElement(f.a.Header,null,"Transaction Sent"),r.a.createElement("p",null,"Awaiting Confirmation"),r.a.createElement("a",{href:"".concat(k.kadenaAPI.explorerURL,"/tx/").concat(e.hash)},"View transaction in Block Explorer")))},I=function(e){return r.a.createElement(f.a,{icon:!0,attached:"bottom",info:!0},r.a.createElement(A.a,{name:"check square outline"}),r.a.createElement(f.a.Content,null,r.a.createElement(f.a.Header,null,"Transaction Confirmed"),r.a.createElement("a",{href:"".concat(k.kadenaAPI.explorerURL,"/tx/").concat(e.hash)},"View transaction in Block Explorer")))},P=function(e,t){return r.a.createElement(f.a,{icon:!0,attached:"bottom",error:!0},r.a.createElement(A.a,{name:"exclamation"}),r.a.createElement(f.a.Content,null,r.a.createElement(f.a.Header,null,"Transaction Failure"),r.a.createElement("p",null,JSON.stringify(t,void 0,2)),r.a.createElement("a",{href:"".concat(k.kadenaAPI.explorerURL,"/tx/").concat(e.hash)},"View transaction in Block Explorer")))},R=function(e,t){return r.a.createElement(f.a,{icon:!0,attached:"bottom",error:!0},r.a.createElement(A.a,{name:"exclamation"}),r.a.createElement(f.a.Content,null,r.a.createElement(f.a.Header,null,"Transaction Validation Failure"),"Transaction was not sent to Blockchain. Check your keys or metadata"))},F=function(e){return r.a.createElement(f.a,{icon:!0,attached:"bottom",warning:!0},r.a.createElement(A.a,{name:"hourglass outline"}),r.a.createElement(f.a.Content,null,r.a.createElement(f.a.Header,null,"Transaction Timeout"),"...but your tx was sent.",r.a.createElement("a",{href:"".concat(k.kadenaAPI.explorerURL,"/tx/").concat(e.hash)},"View transaction in Block Explorer")))},N=function(){var e=Object(s.a)(i.a.mark((function e(t,a,n,r,c,o){var l,u,s,m,d,f,b=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=b.length>6&&void 0!==b[6]?b[6]:{},e.prev=1,u={pactCode:o,caps:g.a.lang.mkCap("Guadian Cap","Authenticates that your a guardian","".concat(k.kadenaAPI.contractAddress,".GUARDIAN"),[c]),gasLimit:k.kadenaAPI.meta.gasLimit,chainId:k.kadenaAPI.meta.chainId,ttl:k.kadenaAPI.meta.ttl,sender:c,envData:l},console.log("toSign",u),e.next=6,g.a.wallet.sign(u);case 6:return s=e.sent,console.log("signed",s),t(s),e.next=11,g.a.wallet.sendSigned(s,k.kadenaAPI.meta.host);case 11:m=e.sent,console.log("txReqKeys",m),a("pending"),e.prev=14,d=8,f={};case 17:if(!(d>0)){e.next=26;break}return e.next=20,new Promise((function(e){return setTimeout(e,15e3)}));case 20:return e.next=22,g.a.fetch.poll(m,k.kadenaAPI.meta.host);case 22:f=e.sent;try{f[s.hash].result.status?d=-1:d-=1}catch(i){d-=1}e.next=17;break;case 26:n(f),"success"===f[s.hash].result.status?(console.log("tx status set to success"),a("success"),r()):0===d?(console.log("tx status set to timeout"),a("timeout"),r()):(console.log("tx status set to failure"),a("failure")),e.next=36;break;case 31:e.prev=31,e.t0=e.catch(14),console.log("tx api failure",e.t0),n(e.t0),a("failure");case 36:e.next=43;break;case 38:e.prev=38,e.t1=e.catch(1),console.log(e.t1),console.log("tx status set to validation error"),a("validation-error");case 43:case"end":return e.stop()}}),e,null,[[1,38],[14,31]])})));return function(t,a,n,r,c,o){return e.apply(this,arguments)}}(),q=function(e){return r.a.createElement(x,{header:["Guardian","Committed KDA","Approved Hash","Approval Date","Guard"],keyOrder:["k","committed-kda","approved-hash","approved-date","guard"],json:e.guardians})},T=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),u=Object(m.a)(l,2),i=u[0],s=u[1],d=Object(n.useState)(""),E=Object(m.a)(d,2),g=E[0],v=E[1],y=Object(n.useState)(""),j=Object(m.a)(y,2),S=j[0],O=j[1],x=Object(n.useState)({}),A=Object(m.a)(x,2),C=A[0],I=A[1],P=Object(n.useState)({}),R=Object(m.a)(P,2),F=R[0],q=R[1];return r.a.createElement("div",null,r.a.createElement(f.a,{attached:!0,header:"Add Ambassador"}),r.a.createElement(b.a,{onSubmit:function(t){return function(t){t.preventDefault(),console.log(c,i,g),N(I,O,q,e.refresh,c,"(".concat(k.kadenaAPI.contractAddress,'.register-ambassador "').concat(c,'" "').concat(i,"\" (read-keyset 'ks))"),{ks:JSON.parse(g)})}(t)},className:"attached fluid segment"},r.a.createElement(b.a.Select,{label:"Select Guardian",required:!0,options:e.guardians.map((function(e){return{key:e.k,value:e.k,text:e.k}})),onChange:function(e,t){o(t.value)}}),r.a.createElement(b.a.Field,{required:!0},r.a.createElement("label",null,"Ambassador Account Name"),r.a.createElement(p.a,{required:!0,value:i,onChange:function(e){return s(e.target.value)}})),r.a.createElement(b.a.TextArea,{required:!0,label:"Ambassador Account Guard",placeholder:JSON.stringify({pred:"keys-all",keys:["8c59a322800b3650f9fc5b6742aa845bc1c35c2625dabfe5a9e9a4cada32c543"]},void 0,2),value:g,onChange:function(e){return v(e.target.value)}}),r.a.createElement(h.a,{color:"blue",type:"submit"},"Submit")),r.a.createElement(w,{tx:C,txRes:F,txStatus:S}))},B=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),u=Object(m.a)(l,2),i=u[0],s=u[1],d=Object(n.useState)(""),p=Object(m.a)(d,2),E=p[0],g=p[1],v=Object(n.useState)({}),y=Object(m.a)(v,2),j=y[0],S=y[1],O=Object(n.useState)({}),x=Object(m.a)(O,2),A=x[0],C=x[1];return r.a.createElement("div",null,r.a.createElement(f.a,{attached:!0,header:"Deactivate Ambassador"}),r.a.createElement(b.a,{onSubmit:function(t){return function(t){t.preventDefault(),N(S,g,C,e.refresh,c,"(".concat(k.kadenaAPI.contractAddress,'.deactivate-ambassador "').concat(c,'" "').concat(i,'")'))}(t)},className:"attached fluid segment"},r.a.createElement(b.a.Select,{label:"Select Guardian",required:!0,options:e.guardians.map((function(e){return{key:e.k,value:e.k,text:e.k}})),onChange:function(e,t){o(t.value)}}),r.a.createElement(b.a.Select,{label:"Select Ambassador",required:!0,options:e.ambassadors.map((function(e){return{key:e.k,value:e.k,text:e.k}})),onChange:function(e){return s(e.target.value)}}),r.a.createElement(h.a,{color:"blue",type:"submit"},"Submit")),r.a.createElement(w,{tx:j,txRes:A,txStatus:E}))},G=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),u=Object(m.a)(l,2),i=u[0],s=u[1],d=Object(n.useState)(""),p=Object(m.a)(d,2),E=p[0],g=p[1],v=Object(n.useState)({}),y=Object(m.a)(v,2),j=y[0],S=y[1],O=Object(n.useState)({}),x=Object(m.a)(O,2),A=x[0],C=x[1];return r.a.createElement("div",null,r.a.createElement(f.a,{attached:!0,header:"Reactivate Ambassador"}),r.a.createElement(b.a,{onSubmit:function(t){return function(t){t.preventDefault(),N(S,g,C,e.refresh,c,"(".concat(k.kadenaAPI.contractAddress,'.reactivate-ambassador "').concat(c,'" "').concat(i,'")'))}(t)},className:"attached fluid segment"},r.a.createElement(b.a.Select,{label:"Select Guardian",required:!0,options:e.guardians.map((function(e){return{key:e.k,value:e.k,text:e.k}})),onChange:function(e,t){o(t.value)}}),r.a.createElement(b.a.Select,{label:"Select Ambassador",required:!0,options:e.ambassadors.map((function(e){return{key:e.k,value:e.k,text:e.k}})),onChange:function(e,t){return s(t.value)}}),r.a.createElement(h.a,{color:"blue",type:"submit"},"Submit")),r.a.createElement(w,{tx:j,txRes:A,txStatus:E}))},L=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),u=Object(m.a)(l,2),i=u[0],s=u[1],d=Object(n.useState)(""),p=Object(m.a)(d,2),E=p[0],g=p[1],v=Object(n.useState)({}),y=Object(m.a)(v,2),j=y[0],S=y[1],O=Object(n.useState)({}),x=Object(m.a)(O,2),A=x[0],C=x[1];return r.a.createElement("div",null,r.a.createElement(f.a,{attached:!0,header:"Rotate Guardian"}),r.a.createElement(b.a,{onSubmit:function(t){return function(t){t.preventDefault(),N(S,g,C,e.refresh,c,"(".concat(k.kadenaAPI.contractAddress,'.reactivate-ambassador "').concat(c,"\" (read-keyset 'ks))"),{ks:JSON.parse(i)})}(t)},className:"attached fluid segment"},r.a.createElement(b.a.Select,{label:"Select Guardian",required:!0,options:e.guardians.map((function(e){return{key:e.k,value:e.k,text:e.k}})),onChange:function(e,t){o(t.value)}}),r.a.createElement(b.a.TextArea,{required:!0,label:"Enter new KeySet",placeholder:JSON.stringify({pred:"keys-all",keys:["8c59a322800b3650f9fc5b6742aa845bc1c35c2625dabfe5a9e9a4cada32c543"]},void 0,2),value:i,onChange:function(e){return s(e.target.value)}}),r.a.createElement(h.a,{color:"blue",type:"submit"},"Submit")),r.a.createElement(w,{tx:j,txRes:A,txStatus:E}))},D=function(e){return r.a.createElement(x,{header:["Ambassador","Active","Voted to Freeze","Guard"],keyOrder:["k","active","voted-to-freeze","guard"],json:e.ambassadors})},H=function(){return r.a.createElement(O,{json:k.kadenaAPI,keyFormatter:k.keyFormatter})},J=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.fetch.local({pactCode:"(".concat(k.kadenaAPI.contractAddress,".").concat(t,")"),meta:g.a.lang.mkMeta(k.kadenaAPI.meta.sender,k.kadenaAPI.meta.chainId,k.kadenaAPI.meta.gasPrice,k.kadenaAPI.meta.gasLimit,k.kadenaAPI.meta.creationTime(),k.kadenaAPI.meta.ttl)},k.kadenaAPI.meta.host);case 2:return a=e.sent,n=a.result.data,console.log("local query data",n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){return r.a.createElement(O,{json:e.initState,header:["","Status"],keyFormatter:y})},U=function(){var e=Object(n.useState)({}),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(m.a)(o,2),u=l[0],f=l[1],b=Object(n.useState)([]),p=Object(m.a)(b,2),h=p[0],E=p[1],g=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("view-state");case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("view-ambassadors");case 2:t=e.sent,E(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("view-guardians");case 2:t=e.sent,f(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){g(),k(),v()}),[]),Object(n.useEffect)((function(){g()}),[h,u]),r.a.createElement(d.a,null,r.a.createElement("h1",null,r.a.createElement("a",null,"Welcome to DAO.init")),r.a.createElement(H,null),r.a.createElement("h2",null,"Contract State"),r.a.createElement(M,{initState:a}),r.a.createElement("h2",null,"Guardians"),r.a.createElement(q,{guardians:u}),r.a.createElement("h2",null,"Ambassadors"),r.a.createElement(D,{ambassadors:h}),r.a.createElement(T,{guardians:u,refresh:function(){return k()}}),r.a.createElement(G,{guardians:u,ambassadors:h,refresh:function(){return k()}}),r.a.createElement(B,{guardians:u,ambassadors:h,refresh:function(){return k()}}),r.a.createElement(L,{guardians:u,refresh:function(){return v()}}))};a(295),a(296),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{basename:"/dao.init-frontend"},r.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t){var a="https://".concat("api.testnet.chainweb.com","/chainweb/0.0/").concat("testnet04","/chain/").concat("0","/pact"),n={contractName:"init",gasStationName:"memory-wall-gas-station",namespace:"free",contractAddress:"".concat("free",".").concat("init"),gasStationAddress:"".concat("free",".").concat("memory-wall-gas-station"),explorerURL:"https://explorer.chainweb.com/".concat("testnet04".slice(0,-2)),meta:{networkId:"testnet04",chainId:"0",host:a,creationTime:function(){return Math.round((new Date).getTime()/1e3)-15},gasPrice:1e-11,gasLimit:1e4,ttl:28800,sender:"mw-free-gas",nonce:"some nonce that doesnt matter"}};e.exports={kadenaAPI:n,keyFormatter:function(e){return e.replace(new RegExp("[A-Z]+","gm")," $&").replace(new RegExp("^[a-z]","gm"),(function(e){return e.toUpperCase()}))}}}},[[166,1,2]]]);
//# sourceMappingURL=main.b0524ec0.chunk.js.map